import { eq, Numeric, round, string } from '../../src'

describe('round', () => {
	const t = (expectation: Numeric, n: Numeric, p?: number) => {
		it(`round(${n}, ${p}) = ${expectation}`, () => {
			const result = round(n, p)
			expect(result.toString()).toBe(string(expectation))
			expect(eq(result, expectation)).toBe(true)
		})
	}

	t('0', '0')
	t('1', '1')
	t('0', '0.09')
	t('1', '0.9')
	t('1', '0.5')
	t('0', '0.4')
	t('0', '0.1')
	t('0', '0.01')
	t('1', '0.5555555555')
	t('0.56', '0.5555555555', 2)
	t('0', '0.0000000001', 2)
	t('0.55555556', '0.5555555555', 8)
	t('0', '0.0000000001', 8)

	t('0', '0.000084888060736883027314038572334303632')
	t('30845717889906383053', '30845717889906383052.56472015469740823')
	t('76', '76.0719')
	t('0', '-0.00686876124450101884528')
	t('71710176', '71710176')
	t('79', '79')
	t('6309793381', '6309793381')
	t('76162410487880977', '76162410487880976.81307140573688335764284')
	t('7491318926', '7491318926.312122759153805942088431')
	t('74909422733607112719', '74909422733607112719.13179009875')
	t('559', '559.2110851431205')
	t('8', '8.0606265529')
	t('24701408591129838', '24701408591129838.22163')
	t('826068555927524695', '826068555927524695')
	t('0', '0.000058441452091833136219167587256')
	t('47353089', '47353089.2019161006899898')
	t('3103', '3103')
	t('5620', '5620.48101861977')
	t('9105547112', '9105547112.1319443692')
	t('335816732795', '335816732794.51601276961965281205689254')
	t('439059239410', '439059239409.55703238112278')
	t('43465109466157505', '43465109466157505')
	t('5390894521', '5390894520.8738091063016')
	t('485669', '485669')
	t('3', '3.284095344472285718254591781467536534546')
	t('0', '-0.4210910538061556801483189')
	t('3134', '3133.654494231705614')
	t('27796900', '27796900.0685101')
	t('736988809325', '736988809325')
	t('577064478018279', '577064478018279')
	t('3269018763090', '3269018763089.5711045989917554')

	t(0, 0)
	t(0, -0)
	t(1, 0.5)
	t(1, 0.7)
	t(1, 1)
	t(1, 1.1)
	t(1, 1.49999)
	t(-1, -0.5)
	t(-1, -0.5000000000000001)
	t(-1, -0.7)
	t(-1, -1)
	t(-1, -1.1)
	t(-1, -1.49999)
	t(-2, -1.5)
	t(-10, -10)

	t(9007199254740990, 9007199254740990)
	t(9007199254740991, 9007199254740991)
	t(-9007199254740990, -9007199254740990)
	t(-9007199254740991, -9007199254740991)

	t(536870911, 536870910.5)
	t(536870911, 536870911)
	t(536870911, 536870911.4)
	t(536870912, 536870911.5)
	t(536870912, 536870912)
	t(536870912, 536870912.4)
	t(536870913, 536870912.5)
	t(536870913, 536870913)
	t(536870913, 536870913.4)
	t(1073741823, 1073741822.5)
	t(1073741823, 1073741823)
	t(1073741823, 1073741823.4)
	t(1073741824, 1073741823.5)
	t(1073741824, 1073741824)
	t(1073741824, 1073741824.4)
	t(1073741825, 1073741824.5)
	t(2147483647, 2147483646.5)
	t(2147483647, 2147483647)
	t(2147483647, 2147483647.4)
	t(2147483648, 2147483647.5)
	t(2147483648, 2147483648)
	t(2147483648, 2147483648.4)
	t(2147483649, 2147483648.5)

	t(0, 0.4)
	t(-0, -0.4)
	t(-1, -0.5)
	t(1, 0.6)
	t(-1, -0.6)
	t(2, 1.5)
	t(2, 1.6)
	t(-2, -1.6)

	t(8640000000000000, 8640000000000000)
	t(8640000000000001, 8640000000000001)
	t(8640000000000002, 8640000000000002)
	t(9007199254740990, 9007199254740990)
	t(9007199254740991, 9007199254740991)
	t(-8640000000000000, -8640000000000000)
	t(-8640000000000001, -8640000000000001)
	t(-8640000000000002, -8640000000000002)
	t(-9007199254740990, -9007199254740990)
	t(-9007199254740991, -9007199254740991)

	t(0, 0.49999999999999994)
	t(1, 0.5)
	t(-0, -0.49999999999999994)

	t('0', '-0', 0)
	t('0', '-0', 1)
	t('0', '0', 10)
	t('0', '-0', 20)

	t('-7187', '-7187', 4)
	t('-2.4263', '-2.426346', 4)
	t('652506', '652506', 3)
	t('-0.0496', '-0.049635', 4)
	t('520216039', '520216039', 7)
	t('53937.4', '53937.399', 1)
	t('-3583', '-3583', 5)
	t('-888980.3', '-888980.3', 1)
	t('-0.336889', '-0.336888682', 6)
	t('43759', '43759', 6)
	t('0.0000804', '0.0000804', 8)
	t('336379823', '336379823', 4)
	t('-5446775', '-5446775', 7)
	t('47086', '47085.84', 0)
	t('-2564', '-2564', 3)
	t('-0.4', '-0.42528874', 1)
	t('-0.00005573', '-0.000055732', 8)
	t('-0.00003014', '-0.000030137', 8)
	t('57', '57', 3)
	t('-7', '-7', 0)
	t('-0.00004595', '-0.00004595', 8)
	t('-22243', '-22243', 0)
	t('5', '5', 1)
	t('2', '2', 2)
	t('3808', '3808', 0)
	t('0.00009', '0.00008892', 5)
	t('0.07', '0.06922', 2)
	t('-326', '-326', 2)
	t('-0.356', '-0.3564473', 3)
	t('0', '-0.003', 0)
	t('-572936', '-572936', 3)
	t('684.2426407', '684.2426407', 8)
	t('0', '-0.0007851', 1)
	t('-0.00064', '-0.00063953', 6)
	t('-3.76703298', '-3.767032983', 8)
	t('-645406477.5', '-645406477.5', 2)
	t('-0.89603', '-0.8960278', 5)
	t('484.002', '484.002', 4)
	t('420', '419.83', 0)
	t('4611867124', '4611867124', 4)
	t('0', '-0.02829833', 1)
	t('-8', '-8', 0)
	t('-0.0073554', '-0.00735541', 7)
	t('228', '228', 3)
	t('0', '0.005', 0)
	t('-0.026', '-0.0259', 3)
	t('-0.00801', '-0.008007359', 5)
	t('-81', '-81', 4)
	t('-2876', '-2876', 5)
	t('-62453828', '-62453828', 7)
	t('-706', '-706', 0)
	t('36.911', '36.9109527', 4)
	t('-0.08', '-0.08', 2)
	t('-0.352847', '-0.352847085', 6)
	t('-0.4389', '-0.438905', 4)
	t('-8858843.829', '-8858843.829', 3)
	t('608475', '608475', 6)
	t('-1.6', '-1.5678', 1)
	t('-7.173', '-7.173', 4)
	t('-54.37621076', '-54.37621076', 8)
	t('4823.725785', '4823.725785', 7)
	t('0', '-0.000084', 1)
	t('-7491', '-7491', 4)
	t('-0.8', '-0.8109', 1)
	t('-91.1579356', '-91.15793558', 7)
	t('-5376196', '-5376196', 1)
	t('-0.6', '-0.6', 1)
	t('-39983.5195', '-39983.5195', 5)
	t('-0.723', '-0.722771', 3)
	t('-8637388', '-8637388', 4)
	t('193', '193', 4)
	t('0.00052', '0.00051869', 5)
	t('-0.248552', '-0.248552', 6)
	t('0.8599583', '0.8599583', 7)
	t('868619', '868619', 3)
	t('-0.0003926', '-0.0003926', 7)
	t('4.3567', '4.35670557', 4)
	t('-238', '-238', 3)
	t('1271.594054', '1271.594054', 7)
	t('-4.1787893', '-4.178789328', 7)
	t('372', '372', 3)
	t('-9.1645', '-9.1645354', 4)
	t('83.241462', '83.241462', 6)
	t('-0.00001262', '-0.00001262', 8)
	t('2138522', '2138522', 6)
	t('-1969563', '-1969563', 8)
})
