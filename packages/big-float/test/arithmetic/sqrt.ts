import { eq, Numeric, sqrt, string } from '../../src'

describe('sqrt', () => {
	const t = (expectation: Numeric, n: Numeric) => {
		it(`sqrt(${n}) = ${expectation}`, () => {
			const result = sqrt(n)
			expect(result.toString()).toBe(string(expectation))
			expect(eq(result, expectation)).toBe(true)
		})
	}

	const e = (n: Numeric) => {
		it(`sqrt(${n}) should throw`, () => {
			expect(() => sqrt(n)).toThrow()
		})
	}

	t('2', 4)
	t('0', 0)
	t('0', -0)
	t('0', '0')
	t('0', '-0')
	t('1', 1)
	t('1', '1')
	t('0.1', 0.01)

	e(-1)
	e('-1')
	e('-0.00000000001')
	e('-2.3')
	e('-9.9e9')

	// Test against Math.sqrt of squared integers.
	for (var i = 0; i < 1e3; i++) {
		var j = Math.floor(Math.random() * Math.pow(2, Math.floor(Math.random() * 26) + 1))
		j = Math.pow(j, 2)
		t(Math.sqrt(j), j)
	}

	// t('346.00153309920463414559', '119717.060907')
	// t('263359760985014.62241224437474495709', '69358363706084030080212405554.3002793975414740876419285502')
	// t('4.14645859760929707104', '17.193118901688058566035426')
	// t('492974271191746.46231483998877250102', '243023632057033585989741137703.800100153395469328387')
	// t('164.78781194238374484766', '27155.022964758430758944789724435')
	// t('7366.78400597487165781255', '54269506.59068717789735301787194313247')
	// t('23762326490698.34975320239967323205', '564648160250544549780100380.5514166040523')
	// t('5.291502622129181181', '28')
	// t('11.47156968462642430546', '131.59691102924')
	// t('316358493873927157.1740897995245240711', '100082696646179606634487051294887359.5035240594546')
	// t('500048686.48939798981543930512', '250048688859772239.7160140065116884182948058142834537')
	// t('6022.37550162532363706717', '36269006.68257686850553015065182301017562876')
	// t('6.8460154244205197188', '46.86792719140366873824501484885278')
	// t('45189.48536114270306146252', '2042089587.204930656134881238462876156607')
	// t('856160326.88774167756915629602', '733010505336524684.93087677')
	// t('522130.17609423801622137924', '272619920788.2')
	// t('52292561.72399606203863014236', '2734512011657938')
})
